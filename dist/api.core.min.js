/*!

    ██╗   ██╗██╗      ██████╗ ██╗     ██╗
    ██║   ██║██║     ██╔═══██╗██║     ██║
    ██║   ██║██║     ██║   ██║██║     ██║
    ╚██╗ ██╔╝██║     ██║▄▄ ██║██║     ╚═╝
     ╚████╔╝ ███████╗╚██████╔╝███████╗██╗
      ╚═══╝  ╚══════╝ ╚══▀▀═╝ ╚══════╝╚═╝

    Généré: Vendredi le 13 février 2026 à 22 h 38
    Auteur: Maxime Larrivée-Roy <mlarriveeroy@gmail.com>
    Github: https://github.com/ssjbm/api-carte-sections

*/
(async()=>{const va=new CSSStyleSheet;va.replaceSync(':root{--cs-width:100%;--cs-aspect-ratio:16/10;--cs-color-highlight:#336699bf;--cs-color-even:#33669956;--cs-shadow:none}.carte-sections{position:relative;display:flex;flex-direction:column;width:var(--cs-width)}.carte-sections__header{line-height:2em;white-space:nowrap}.carte-sections__header__postalcode{font-size:1em!important;text-align:center;text-transform:uppercase;width:5em;border:1px solid #000}.carte-sections__header__postalcode:focus{border-width:2px}.carte-sections__header__postalcode::placeholder{opacity:.4}.carte-sections__header__postalcode.shake{filter:blur(.01rem);animation-name:cs-shake;animation-duration:50ms;animation-iteration-count:infinite;animation-timing-function:linear;transform-origin:center center}.carte-sections__header__validmark::before{margin:0 .25em}.carte-sections__header:has(.carte-sections__header__postalcode:placeholder-shown) .carte-sections__header__validmark{display:none}.carte-sections__header:has(.carte-sections__header__postalcode:valid) .carte-sections__header__validmark::before{content:"\u2705"}.carte-sections__header:has(.carte-sections__header__postalcode:invalid) .carte-sections__header__validmark::before{content:"\u274C"}.carte-sections__map{position:relative;margin-top:.5em;aspect-ratio:var(--cs-aspect-ratio);box-shadow:var(--cs-shadow)}.carte-sections__map__toolbar{background-color:var(--cs-color-highlight);margin-top:.6em;margin-left:.6em;font-size:1.1rem;font-weight:700;padding:.3em .5em;box-shadow:0 .2em .5em rgba(0,0,0,.35);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;max-width:calc(100% - 70px);user-select:none;display:none;-webkit-appearance:none;appearance:none}.carte-sections__infos{margin-top:1.5em;font-size:.9em}.carte-sections__infos table th,.carte-sections__infos table td{padding:.2em}.carte-sections__infos table th{text-align:left;font-size:1.3em;background-color:var(--cs-color-highlight)}.carte-sections__infos table tr:nth-child(even) td{background-color:var(--cs-color-even)}.carte-sections__infos table tr td:first-child{line-height:1.5em;width:1%;white-space:nowrap;padding-right:1em;font-weight:700;vertical-align:top}.carte-sections .gm-style .gm-fullscreen-control{width:2rem!important;height:2rem!important}.carte-sections .gm-style .gm-fullscreen-control img{width:1rem!important;height:1rem!important}@keyframes cs-shake{0%{transform:translate(-1%,1%) rotate(-3deg)}to{transform:translate(1%,-1%) rotate(3deg)}}'),document.adoptedStyleSheets=[...document.adoptedStyleSheets,va],(()=>{self.create=(t,e=null,a=null,n={})=>{let s=document.createElement(t);return e&&(s.className=e),a&&(s.innerHTML=a),Object.entries(n).forEach(r=>s.setAttribute(r[0],r[1])),s},HTMLElement.prototype.create=function(t,e=null,a=null,n={}){let s=create(t,e,a,n);return this.append(s),s},self.loadJsonProperties=async function(t,e={}){let a=Object.entries(e),n=await Promise.allSettled(a.map(async([s,r])=>{let l=await fetch(r),o=null;try{o=await l.json()}catch{}return{key:s,url:r,status:l.status,ok:l.ok,data:o}}));for(let s of n)if(s.status==="fulfilled"){let{key:r,url:l,status:o,ok:u,data:i}=s.value;if(!u){console.error("".concat(r," [").concat(o," - ERREUR] ").concat(l));continue}t[r]=i}else console.error("Erreur r\xE9seau/JS pendant le chargement :",s.reason);return t},self.documentReady=function(t=null){return new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{t&&t(),e()},{once:!0}):(t&&t(),e())})},self.loadScript=async function(t,e={},a=!1){let n=new URL(t);Object.entries(e).forEach(([r,l])=>n.searchParams.set(r,l));let s=document.createElement("script");s.src=n.toString(),s.async=a,document.head.appendChild(s)};function rt(t){let e=t.length;for(;--e>=0;)t[e]=0}var je=0,xa=1,Ge=2,Ke=3,Ye=258,Yt=29,ft=256,mt=ft+1+Yt,it=30,Jt=19,za=2*mt+1,W=15,qt=16,Je=7,Vt=256,Ea=16,Aa=17,Sa=18,Xt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ut=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),qe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ra=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ve=512,j=new Array((mt+2)*2);rt(j);var pt=new Array(it*2);rt(pt);var gt=new Array(Ve);rt(gt);var wt=new Array(Ye-Ke+1);rt(wt);var Wt=new Array(Yt);rt(Wt);var Ct=new Array(it);rt(Ct);function Qt(t,e,a,n,s){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=s,this.has_stree=t&&t.length}var Ta,Za,La;function $t(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}var Ua=t=>t<256?gt[t]:gt[256+(t>>>7)],bt=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},O=(t,e,a)=>{t.bi_valid>qt-a?(t.bi_buf|=e<<t.bi_valid&65535,bt(t,t.bi_buf),t.bi_buf=e>>qt-t.bi_valid,t.bi_valid+=a-qt):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},B=(t,e,a)=>{O(t,a[e*2],a[e*2+1])},Ca=(t,e)=>{let a=0;do a|=t&1,t>>>=1,a<<=1;while(--e>0);return a>>>1},Xe=t=>{t.bi_valid===16?(bt(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},We=(t,e)=>{let a=e.dyn_tree,n=e.max_code,s=e.stat_desc.static_tree,r=e.stat_desc.has_stree,l=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,u=e.stat_desc.max_length,i,d,k,c,h,A,R=0;for(c=0;c<=W;c++)t.bl_count[c]=0;for(a[t.heap[t.heap_max]*2+1]=0,i=t.heap_max+1;i<za;i++)d=t.heap[i],c=a[a[d*2+1]*2+1]+1,c>u&&(c=u,R++),a[d*2+1]=c,!(d>n)&&(t.bl_count[c]++,h=0,d>=o&&(h=l[d-o]),A=a[d*2],t.opt_len+=A*(c+h),r&&(t.static_len+=A*(s[d*2+1]+h)));if(R!==0){do{for(c=u-1;t.bl_count[c]===0;)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[u]--,R-=2}while(R>0);for(c=u;c!==0;c--)for(d=t.bl_count[c];d!==0;)k=t.heap[--i],!(k>n)&&(a[k*2+1]!==c&&(t.opt_len+=(c-a[k*2+1])*a[k*2],a[k*2+1]=c),d--)}},Oa=(t,e,a)=>{let n=new Array(W+1),s=0,r,l;for(r=1;r<=W;r++)s=s+a[r-1]<<1,n[r]=s;for(l=0;l<=e;l++){let o=t[l*2+1];o!==0&&(t[l*2]=Ca(n[o]++,o))}},Qe=()=>{let t,e,a,n,s,r=new Array(W+1);for(a=0,n=0;n<Yt-1;n++)for(Wt[n]=a,t=0;t<1<<Xt[n];t++)wt[a++]=n;for(wt[a-1]=n,s=0,n=0;n<16;n++)for(Ct[n]=s,t=0;t<1<<Ut[n];t++)gt[s++]=n;for(s>>=7;n<it;n++)for(Ct[n]=s<<7,t=0;t<1<<Ut[n]-7;t++)gt[256+s++]=n;for(e=0;e<=W;e++)r[e]=0;for(t=0;t<=143;)j[t*2+1]=8,t++,r[8]++;for(;t<=255;)j[t*2+1]=9,t++,r[9]++;for(;t<=279;)j[t*2+1]=7,t++,r[7]++;for(;t<=287;)j[t*2+1]=8,t++,r[8]++;for(Oa(j,mt+1,r),t=0;t<it;t++)pt[t*2+1]=5,pt[t*2]=Ca(t,5);Ta=new Qt(j,Xt,ft+1,mt,W),Za=new Qt(pt,Ut,0,it,W),La=new Qt(new Array(0),qe,0,Jt,Je)},Ia=t=>{let e;for(e=0;e<mt;e++)t.dyn_ltree[e*2]=0;for(e=0;e<it;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Jt;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Vt*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Da=t=>{t.bi_valid>8?bt(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Na=(t,e,a,n)=>{let s=e*2,r=a*2;return t[s]<t[r]||t[s]===t[r]&&n[e]<=n[a]},ta=(t,e,a)=>{let n=t.heap[a],s=a<<1;for(;s<=t.heap_len&&(s<t.heap_len&&Na(e,t.heap[s+1],t.heap[s],t.depth)&&s++,!Na(e,n,t.heap[s],t.depth));)t.heap[a]=t.heap[s],a=s,s<<=1;t.heap[a]=n},Fa=(t,e,a)=>{let n,s,r=0,l,o;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+r++]&255,n+=(t.pending_buf[t.sym_buf+r++]&255)<<8,s=t.pending_buf[t.sym_buf+r++],n===0?B(t,s,e):(l=wt[s],B(t,l+ft+1,e),o=Xt[l],o!==0&&(s-=Wt[l],O(t,s,o)),n--,l=Ua(n),B(t,l,a),o=Ut[l],o!==0&&(n-=Ct[l],O(t,n,o)));while(r<t.sym_next);B(t,Vt,e)},aa=(t,e)=>{let a=e.dyn_tree,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.elems,l,o,u=-1,i;for(t.heap_len=0,t.heap_max=za,l=0;l<r;l++)a[l*2]!==0?(t.heap[++t.heap_len]=u=l,t.depth[l]=0):a[l*2+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=u<2?++u:0,a[i*2]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=n[i*2+1]);for(e.max_code=u,l=t.heap_len>>1;l>=1;l--)ta(t,a,l);i=r;do l=t.heap[1],t.heap[1]=t.heap[t.heap_len--],ta(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=l,t.heap[--t.heap_max]=o,a[i*2]=a[l*2]+a[o*2],t.depth[i]=(t.depth[l]>=t.depth[o]?t.depth[l]:t.depth[o])+1,a[l*2+1]=a[o*2+1]=i,t.heap[1]=i++,ta(t,a,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],We(t,e),Oa(a,u,t.bl_count)},Ba=(t,e,a)=>{let n,s=-1,r,l=e[1],o=0,u=7,i=4;for(l===0&&(u=138,i=3),e[(a+1)*2+1]=65535,n=0;n<=a;n++)r=l,l=e[(n+1)*2+1],!(++o<u&&r===l)&&(o<i?t.bl_tree[r*2]+=o:r!==0?(r!==s&&t.bl_tree[r*2]++,t.bl_tree[Ea*2]++):o<=10?t.bl_tree[Aa*2]++:t.bl_tree[Sa*2]++,o=0,s=r,l===0?(u=138,i=3):r===l?(u=6,i=3):(u=7,i=4))},Pa=(t,e,a)=>{let n,s=-1,r,l=e[1],o=0,u=7,i=4;for(l===0&&(u=138,i=3),n=0;n<=a;n++)if(r=l,l=e[(n+1)*2+1],!(++o<u&&r===l)){if(o<i)do B(t,r,t.bl_tree);while(--o!==0);else r!==0?(r!==s&&(B(t,r,t.bl_tree),o--),B(t,Ea,t.bl_tree),O(t,o-3,2)):o<=10?(B(t,Aa,t.bl_tree),O(t,o-3,3)):(B(t,Sa,t.bl_tree),O(t,o-11,7));o=0,s=r,l===0?(u=138,i=3):r===l?(u=6,i=3):(u=7,i=4)}},$e=t=>{let e;for(Ba(t,t.dyn_ltree,t.l_desc.max_code),Ba(t,t.dyn_dtree,t.d_desc.max_code),aa(t,t.bl_desc),e=Jt-1;e>=3&&t.bl_tree[Ra[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},tn=(t,e,a,n)=>{let s;for(O(t,e-257,5),O(t,a-1,5),O(t,n-4,4),s=0;s<n;s++)O(t,t.bl_tree[Ra[s]*2+1],3);Pa(t,t.dyn_ltree,e-1),Pa(t,t.dyn_dtree,a-1)},an=t=>{let e=4093624447,a;for(a=0;a<=31;a++,e>>>=1)if(e&1&&t.dyn_ltree[a*2]!==0)return 0;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return 1;for(a=32;a<ft;a++)if(t.dyn_ltree[a*2]!==0)return 1;return 0},Ma=!1,en=t=>{Ma||(Qe(),Ma=!0),t.l_desc=new $t(t.dyn_ltree,Ta),t.d_desc=new $t(t.dyn_dtree,Za),t.bl_desc=new $t(t.bl_tree,La),t.bi_buf=0,t.bi_valid=0,Ia(t)},Ha=(t,e,a,n)=>{O(t,(je<<1)+(n?1:0),3),Da(t),bt(t,a),bt(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a},nn=t=>{O(t,xa<<1,3),B(t,Vt,j),Xe(t)},sn=(t,e,a,n)=>{let s,r,l=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=an(t)),aa(t,t.l_desc),aa(t,t.d_desc),l=$e(t),s=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=s&&(s=r)):s=r=a+5,a+4<=s&&e!==-1?Ha(t,e,a,n):t.strategy===4||r===s?(O(t,(xa<<1)+(n?1:0),3),Fa(t,j,pt)):(O(t,(Ge<<1)+(n?1:0),3),tn(t,t.l_desc.max_code+1,t.d_desc.max_code+1,l+1),Fa(t,t.dyn_ltree,t.dyn_dtree)),Ia(t),n&&Da(t)},rn=(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,e===0?t.dyn_ltree[a*2]++:(t.matches++,e--,t.dyn_ltree[(wt[a]+ft+1)*2]++,t.dyn_dtree[Ua(e)*2]++),t.sym_next===t.sym_end),on=en,ln=Ha,dn=sn,hn=rn,cn=nn,_n={_tr_init:on,_tr_stored_block:ln,_tr_flush_block:dn,_tr_tally:hn,_tr_align:cn},un=(t,e,a,n)=>{let s=t&65535|0,r=t>>>16&65535|0,l=0;for(;a!==0;){l=a>2e3?2e3:a,a-=l;do s=s+e[n++]|0,r=r+s|0;while(--l);s%=65521,r%=65521}return s|r<<16|0},yt=un,fn=()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[a]=t}return e},mn=new Uint32Array(fn()),pn=(t,e,a,n)=>{let s=mn,r=n+a;t^=-1;for(let l=n;l<r;l++)t=t>>>8^s[(t^e[l])&255];return t^-1},Z=pn,Q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ot={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:gn,_tr_stored_block:ea,_tr_flush_block:wn,_tr_tally:Y,_tr_align:bn}=_n,{Z_NO_FLUSH:J,Z_PARTIAL_FLUSH:yn,Z_FULL_FLUSH:kn,Z_FINISH:N,Z_BLOCK:ja,Z_OK:L,Z_STREAM_END:Ga,Z_STREAM_ERROR:P,Z_DATA_ERROR:vn,Z_BUF_ERROR:na,Z_DEFAULT_COMPRESSION:xn,Z_FILTERED:zn,Z_HUFFMAN_ONLY:Ot,Z_RLE:En,Z_FIXED:An,Z_DEFAULT_STRATEGY:Sn,Z_UNKNOWN:Rn,Z_DEFLATED:It}=ot,Tn=9,Zn=15,Ln=8,Un=29,Cn=256,sa=Cn+1+Un,On=30,In=19,Dn=2*sa+1,Nn=15,y=3,q=258,M=q+y+1,Fn=32,lt=42,ra=57,ia=69,oa=73,la=91,da=103,$=113,kt=666,U=1,dt=2,tt=3,ht=4,Bn=3,at=(t,e)=>(t.msg=Q[e],e),Ka=t=>t*2-(t>4?9:0),V=t=>{let e=t.length;for(;--e>=0;)t[e]=0},Pn=t=>{let e,a,n,s=t.w_size;e=t.hash_size,n=e;do a=t.head[--n],t.head[n]=a>=s?a-s:0;while(--e);e=s,n=e;do a=t.prev[--n],t.prev[n]=a>=s?a-s:0;while(--e)},Mn=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask,X=Mn,I=t=>{let e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),a!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,e.pending===0&&(e.pending_out=0))},D=(t,e)=>{wn(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,I(t.strm)},z=(t,e)=>{t.pending_buf[t.pending++]=e},vt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},ha=(t,e,a,n)=>{let s=t.avail_in;return s>n&&(s=n),s===0?0:(t.avail_in-=s,e.set(t.input.subarray(t.next_in,t.next_in+s),a),t.state.wrap===1?t.adler=yt(t.adler,e,s,a):t.state.wrap===2&&(t.adler=Z(t.adler,e,s,a)),t.next_in+=s,t.total_in+=s,s)},Ya=(t,e)=>{let a=t.max_chain_length,n=t.strstart,s,r,l=t.prev_length,o=t.nice_match,u=t.strstart>t.w_size-M?t.strstart-(t.w_size-M):0,i=t.window,d=t.w_mask,k=t.prev,c=t.strstart+q,h=i[n+l-1],A=i[n+l];t.prev_length>=t.good_match&&(a>>=2),o>t.lookahead&&(o=t.lookahead);do if(s=e,!(i[s+l]!==A||i[s+l-1]!==h||i[s]!==i[n]||i[++s]!==i[n+1])){n+=2,s++;do;while(i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&i[++n]===i[++s]&&n<c);if(r=q-(c-n),n=c-q,r>l){if(t.match_start=e,l=r,r>=o)break;h=i[n+l-1],A=i[n+l]}}while((e=k[e&d])>u&&--a!==0);return l<=t.lookahead?l:t.lookahead},ct=t=>{let e=t.w_size,a,n,s;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-M)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),Pn(t),n+=e),t.strm.avail_in===0)break;if(a=ha(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=y)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=X(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=X(t,t.ins_h,t.window[s+y-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<y)););}while(t.lookahead<M&&t.strm.avail_in!==0)},Ja=(t,e)=>{let a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,s,r,l=0,o=t.strm.avail_in;do{if(n=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r||(r=t.strm.avail_out-r,s=t.strstart-t.block_start,n>s+t.strm.avail_in&&(n=s+t.strm.avail_in),n>r&&(n=r),n<a&&(n===0&&e!==N||e===J||n!==s+t.strm.avail_in)))break;l=e===N&&n===s+t.strm.avail_in?1:0,ea(t,0,0,l),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,I(t.strm),s&&(s>n&&(s=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+s),t.strm.next_out),t.strm.next_out+=s,t.strm.avail_out-=s,t.strm.total_out+=s,t.block_start+=s,n-=s),n&&(ha(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(l===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),l?ht:e!==J&&e!==N&&t.strm.avail_in===0&&t.strstart===t.block_start?dt:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(ha(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,a=r>t.w_size?t.w_size:r,s=t.strstart-t.block_start,(s>=a||(s||e===N)&&e!==J&&t.strm.avail_in===0&&s<=r)&&(n=s>r?r:s,l=e===N&&t.strm.avail_in===0&&n===s?1:0,ea(t,t.block_start,n,l),t.block_start+=n,I(t.strm)),l?tt:U)},ca=(t,e)=>{let a,n;for(;;){if(t.lookahead<M){if(ct(t),t.lookahead<M&&e===J)return U;if(t.lookahead===0)break}if(a=0,t.lookahead>=y&&(t.ins_h=X(t,t.ins_h,t.window[t.strstart+y-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),a!==0&&t.strstart-a<=t.w_size-M&&(t.match_length=Ya(t,a)),t.match_length>=y)if(n=Y(t,t.strstart-t.match_start,t.match_length-y),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=y){t.match_length--;do t.strstart++,t.ins_h=X(t,t.ins_h,t.window[t.strstart+y-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=X(t,t.ins_h,t.window[t.strstart+1]);else n=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(D(t,!1),t.strm.avail_out===0))return U}return t.insert=t.strstart<y-1?t.strstart:y-1,e===N?(D(t,!0),t.strm.avail_out===0?tt:ht):t.sym_next&&(D(t,!1),t.strm.avail_out===0)?U:dt},_t=(t,e)=>{let a,n,s;for(;;){if(t.lookahead<M){if(ct(t),t.lookahead<M&&e===J)return U;if(t.lookahead===0)break}if(a=0,t.lookahead>=y&&(t.ins_h=X(t,t.ins_h,t.window[t.strstart+y-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=y-1,a!==0&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-M&&(t.match_length=Ya(t,a),t.match_length<=5&&(t.strategy===zn||t.match_length===y&&t.strstart-t.match_start>4096)&&(t.match_length=y-1)),t.prev_length>=y&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-y,n=Y(t,t.strstart-1-t.prev_match,t.prev_length-y),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=X(t,t.ins_h,t.window[t.strstart+y-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=y-1,t.strstart++,n&&(D(t,!1),t.strm.avail_out===0))return U}else if(t.match_available){if(n=Y(t,0,t.window[t.strstart-1]),n&&D(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return U}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Y(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<y-1?t.strstart:y-1,e===N?(D(t,!0),t.strm.avail_out===0?tt:ht):t.sym_next&&(D(t,!1),t.strm.avail_out===0)?U:dt},Hn=(t,e)=>{let a,n,s,r,l=t.window;for(;;){if(t.lookahead<=q){if(ct(t),t.lookahead<=q&&e===J)return U;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=y&&t.strstart>0&&(s=t.strstart-1,n=l[s],n===l[++s]&&n===l[++s]&&n===l[++s])){r=t.strstart+q;do;while(n===l[++s]&&n===l[++s]&&n===l[++s]&&n===l[++s]&&n===l[++s]&&n===l[++s]&&n===l[++s]&&n===l[++s]&&s<r);t.match_length=q-(r-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=y?(a=Y(t,1,t.match_length-y),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(D(t,!1),t.strm.avail_out===0))return U}return t.insert=0,e===N?(D(t,!0),t.strm.avail_out===0?tt:ht):t.sym_next&&(D(t,!1),t.strm.avail_out===0)?U:dt},jn=(t,e)=>{let a;for(;;){if(t.lookahead===0&&(ct(t),t.lookahead===0)){if(e===J)return U;break}if(t.match_length=0,a=Y(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(D(t,!1),t.strm.avail_out===0))return U}return t.insert=0,e===N?(D(t,!0),t.strm.avail_out===0?tt:ht):t.sym_next&&(D(t,!1),t.strm.avail_out===0)?U:dt};function H(t,e,a,n,s){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=s}var xt=[new H(0,0,0,0,Ja),new H(4,4,8,4,ca),new H(4,5,16,8,ca),new H(4,6,32,32,ca),new H(4,4,16,16,_t),new H(8,16,32,32,_t),new H(8,16,128,128,_t),new H(8,32,128,256,_t),new H(32,128,258,1024,_t),new H(32,258,258,4096,_t)],Gn=t=>{t.window_size=2*t.w_size,V(t.head),t.max_lazy_match=xt[t.level].max_lazy,t.good_match=xt[t.level].good_length,t.nice_match=xt[t.level].nice_length,t.max_chain_length=xt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=y-1,t.match_available=0,t.ins_h=0};function Kn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=It,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Dn*2),this.dyn_dtree=new Uint16Array((2*On+1)*2),this.bl_tree=new Uint16Array((2*In+1)*2),V(this.dyn_ltree),V(this.dyn_dtree),V(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Nn+1),this.heap=new Uint16Array(2*sa+1),V(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*sa+1),V(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var zt=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.status!==lt&&e.status!==ra&&e.status!==ia&&e.status!==oa&&e.status!==la&&e.status!==da&&e.status!==$&&e.status!==kt?1:0},qa=t=>{if(zt(t))return at(t,P);t.total_in=t.total_out=0,t.data_type=Rn;let e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?ra:e.wrap?lt:$,t.adler=e.wrap===2?0:1,e.last_flush=-2,gn(e),L},Va=t=>{let e=qa(t);return e===L&&Gn(t.state),e},Yn=(t,e)=>zt(t)||t.state.wrap!==2?P:(t.state.gzhead=e,L),Xa=(t,e,a,n,s,r)=>{if(!t)return P;let l=1;if(e===xn&&(e=6),n<0?(l=0,n=-n):n>15&&(l=2,n-=16),s<1||s>Tn||a!==It||n<8||n>15||e<0||e>9||r<0||r>An||n===8&&l!==1)return at(t,P);n===8&&(n=9);let o=new Kn;return t.state=o,o.strm=t,o.status=lt,o.wrap=l,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+y-1)/y),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=r,o.method=a,Va(t)},Jn=(t,e)=>Xa(t,e,It,Zn,Ln,Sn),qn=(t,e)=>{if(zt(t)||e>ja||e<0)return t?at(t,P):P;let a=t.state;if(!t.output||t.avail_in!==0&&!t.input||a.status===kt&&e!==N)return at(t,t.avail_out===0?na:P);let n=a.last_flush;if(a.last_flush=e,a.pending!==0){if(I(t),t.avail_out===0)return a.last_flush=-1,L}else if(t.avail_in===0&&Ka(e)<=Ka(n)&&e!==N)return at(t,na);if(a.status===kt&&t.avail_in!==0)return at(t,na);if(a.status===lt&&a.wrap===0&&(a.status=$),a.status===lt){let s=It+(a.w_bits-8<<4)<<8,r=-1;if(a.strategy>=Ot||a.level<2?r=0:a.level<6?r=1:a.level===6?r=2:r=3,s|=r<<6,a.strstart!==0&&(s|=Fn),s+=31-s%31,vt(a,s),a.strstart!==0&&(vt(a,t.adler>>>16),vt(a,t.adler&65535)),t.adler=1,a.status=$,I(t),a.pending!==0)return a.last_flush=-1,L}if(a.status===ra){if(t.adler=0,z(a,31),z(a,139),z(a,8),a.gzhead)z(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),z(a,a.gzhead.time&255),z(a,a.gzhead.time>>8&255),z(a,a.gzhead.time>>16&255),z(a,a.gzhead.time>>24&255),z(a,a.level===9?2:a.strategy>=Ot||a.level<2?4:0),z(a,a.gzhead.os&255),a.gzhead.extra&&a.gzhead.extra.length&&(z(a,a.gzhead.extra.length&255),z(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=Z(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ia;else if(z(a,0),z(a,0),z(a,0),z(a,0),z(a,0),z(a,a.level===9?2:a.strategy>=Ot||a.level<2?4:0),z(a,Bn),a.status=$,I(t),a.pending!==0)return a.last_flush=-1,L}if(a.status===ia){if(a.gzhead.extra){let s=a.pending,r=(a.gzhead.extra.length&65535)-a.gzindex;for(;a.pending+r>a.pending_buf_size;){let o=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+o),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex+=o,I(t),a.pending!==0)return a.last_flush=-1,L;s=0,r-=o}let l=new Uint8Array(a.gzhead.extra);a.pending_buf.set(l.subarray(a.gzindex,a.gzindex+r),a.pending),a.pending+=r,a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex=0}a.status=oa}if(a.status===oa){if(a.gzhead.name){let s=a.pending,r;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s)),I(t),a.pending!==0)return a.last_flush=-1,L;s=0}a.gzindex<a.gzhead.name.length?r=a.gzhead.name.charCodeAt(a.gzindex++)&255:r=0,z(a,r)}while(r!==0);a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex=0}a.status=la}if(a.status===la){if(a.gzhead.comment){let s=a.pending,r;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s)),I(t),a.pending!==0)return a.last_flush=-1,L;s=0}a.gzindex<a.gzhead.comment.length?r=a.gzhead.comment.charCodeAt(a.gzindex++)&255:r=0,z(a,r)}while(r!==0);a.gzhead.hcrc&&a.pending>s&&(t.adler=Z(t.adler,a.pending_buf,a.pending-s,s))}a.status=da}if(a.status===da){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(I(t),a.pending!==0))return a.last_flush=-1,L;z(a,t.adler&255),z(a,t.adler>>8&255),t.adler=0}if(a.status=$,I(t),a.pending!==0)return a.last_flush=-1,L}if(t.avail_in!==0||a.lookahead!==0||e!==J&&a.status!==kt){let s=a.level===0?Ja(a,e):a.strategy===Ot?jn(a,e):a.strategy===En?Hn(a,e):xt[a.level].func(a,e);if((s===tt||s===ht)&&(a.status=kt),s===U||s===tt)return t.avail_out===0&&(a.last_flush=-1),L;if(s===dt&&(e===yn?bn(a):e!==ja&&(ea(a,0,0,!1),e===kn&&(V(a.head),a.lookahead===0&&(a.strstart=0,a.block_start=0,a.insert=0))),I(t),t.avail_out===0))return a.last_flush=-1,L}return e!==N?L:a.wrap<=0?Ga:(a.wrap===2?(z(a,t.adler&255),z(a,t.adler>>8&255),z(a,t.adler>>16&255),z(a,t.adler>>24&255),z(a,t.total_in&255),z(a,t.total_in>>8&255),z(a,t.total_in>>16&255),z(a,t.total_in>>24&255)):(vt(a,t.adler>>>16),vt(a,t.adler&65535)),I(t),a.wrap>0&&(a.wrap=-a.wrap),a.pending!==0?L:Ga)},Vn=t=>{if(zt(t))return P;let e=t.state.status;return t.state=null,e===$?at(t,vn):L},Xn=(t,e)=>{let a=e.length;if(zt(t))return P;let n=t.state,s=n.wrap;if(s===2||s===1&&n.status!==lt||n.lookahead)return P;if(s===1&&(t.adler=yt(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){s===0&&(V(n.head),n.strstart=0,n.block_start=0,n.insert=0);let u=new Uint8Array(n.w_size);u.set(e.subarray(a-n.w_size,a),0),e=u,a=n.w_size}let r=t.avail_in,l=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,ct(n);n.lookahead>=y;){let u=n.strstart,i=n.lookahead-(y-1);do n.ins_h=X(n,n.ins_h,n.window[u+y-1]),n.prev[u&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=u,u++;while(--i);n.strstart=u,n.lookahead=y-1,ct(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=y-1,n.match_available=0,t.next_in=l,t.input=o,t.avail_in=r,n.wrap=s,L},Wn=Jn,Qn=Xa,$n=Va,ts=qa,as=Yn,es=qn,ns=Vn,ss=Xn,rs="pako deflate (from Nodeca project)",Et={deflateInit:Wn,deflateInit2:Qn,deflateReset:$n,deflateResetKeep:ts,deflateSetHeader:as,deflate:es,deflateEnd:ns,deflateSetDictionary:ss,deflateInfo:rs},is=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),os=function(t){let e=Array.prototype.slice.call(arguments,1);for(;e.length;){let a=e.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(let n in a)is(a,n)&&(t[n]=a[n])}}return t},ls=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;let a=new Uint8Array(e);for(let n=0,s=0,r=t.length;n<r;n++){let l=t[n];a.set(l,s),s+=l.length}return a},Dt={assign:os,flattenChunks:ls},Wa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wa=!1}var At=new Uint8Array(256);for(let t=0;t<256;t++)At[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;At[254]=At[254]=1;var ds=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,a,n,s,r,l=t.length,o=0;for(s=0;s<l;s++)a=t.charCodeAt(s),(a&64512)===55296&&s+1<l&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(a=65536+(a-55296<<10)+(n-56320),s++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),r=0,s=0;r<o;s++)a=t.charCodeAt(s),(a&64512)===55296&&s+1<l&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(a=65536+(a-55296<<10)+(n-56320),s++)),a<128?e[r++]=a:a<2048?(e[r++]=192|a>>>6,e[r++]=128|a&63):a<65536?(e[r++]=224|a>>>12,e[r++]=128|a>>>6&63,e[r++]=128|a&63):(e[r++]=240|a>>>18,e[r++]=128|a>>>12&63,e[r++]=128|a>>>6&63,e[r++]=128|a&63);return e},hs=(t,e)=>{if(e<65534&&t.subarray&&Wa)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let n=0;n<e;n++)a+=String.fromCharCode(t[n]);return a},cs=(t,e)=>{let a=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s,r=new Array(a*2);for(s=0,n=0;n<a;){let l=t[n++];if(l<128){r[s++]=l;continue}let o=At[l];if(o>4){r[s++]=65533,n+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&n<a;)l=l<<6|t[n++]&63,o--;if(o>1){r[s++]=65533;continue}l<65536?r[s++]=l:(l-=65536,r[s++]=55296|l>>10&1023,r[s++]=56320|l&1023)}return hs(r,s)},_s=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let a=e-1;for(;a>=0&&(t[a]&192)===128;)a--;return a<0||a===0?e:a+At[t[a]]>e?a:e},St={string2buf:ds,buf2string:cs,utf8border:_s};function us(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Qa=us,$a=Object.prototype.toString,{Z_NO_FLUSH:fs,Z_SYNC_FLUSH:ms,Z_FULL_FLUSH:ps,Z_FINISH:gs,Z_OK:Nt,Z_STREAM_END:ws,Z_DEFAULT_COMPRESSION:bs,Z_DEFAULT_STRATEGY:ys,Z_DEFLATED:ks}=ot;function Rt(t){this.options=Dt.assign({level:bs,method:ks,chunkSize:16384,windowBits:15,memLevel:8,strategy:ys},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qa,this.strm.avail_out=0;let a=Et.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Nt)throw new Error(Q[a]);if(e.header&&Et.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=St.string2buf(e.dictionary):$a.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,a=Et.deflateSetDictionary(this.strm,n),a!==Nt)throw new Error(Q[a]);this._dict_set=!0}}Rt.prototype.push=function(t,e){let a=this.strm,n=this.options.chunkSize,s,r;if(this.ended)return!1;for(e===~~e?r=e:r=e===!0?gs:fs,typeof t=="string"?a.input=St.string2buf(t):$a.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){if(a.avail_out===0&&(a.output=new Uint8Array(n),a.next_out=0,a.avail_out=n),(r===ms||r===ps)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(s=Et.deflate(a,r),s===ws)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),s=Et.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Nt;if(a.avail_out===0){this.onData(a.output);continue}if(r>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(a.avail_in===0)break}return!0},Rt.prototype.onData=function(t){this.chunks.push(t)},Rt.prototype.onEnd=function(t){t===Nt&&(this.result=Dt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function _a(t,e){let a=new Rt(e);if(a.push(t,!0),a.err)throw a.msg||Q[a.err];return a.result}function vs(t,e){return e=e||{},e.raw=!0,_a(t,e)}function xs(t,e){return e=e||{},e.gzip=!0,_a(t,e)}var zs=Rt,Es=_a,As=vs,Ss=xs,Rs=ot,Ts={Deflate:zs,deflate:Es,deflateRaw:As,gzip:Ss,constants:Rs},Ft=16209,Zs=16191,Ls=function(t,e){let a,n,s,r,l,o,u,i,d,k,c,h,A,R,v,g,p,_,m,T,x,b,E,f,w=t.state;a=t.next_in,E=t.input,n=a+(t.avail_in-5),s=t.next_out,f=t.output,r=s-(e-t.avail_out),l=s+(t.avail_out-257),o=w.dmax,u=w.wsize,i=w.whave,d=w.wnext,k=w.window,c=w.hold,h=w.bits,A=w.lencode,R=w.distcode,v=(1<<w.lenbits)-1,g=(1<<w.distbits)-1;t:do{h<15&&(c+=E[a++]<<h,h+=8,c+=E[a++]<<h,h+=8),p=A[c&v];a:for(;;){if(_=p>>>24,c>>>=_,h-=_,_=p>>>16&255,_===0)f[s++]=p&65535;else if(_&16){m=p&65535,_&=15,_&&(h<_&&(c+=E[a++]<<h,h+=8),m+=c&(1<<_)-1,c>>>=_,h-=_),h<15&&(c+=E[a++]<<h,h+=8,c+=E[a++]<<h,h+=8),p=R[c&g];e:for(;;){if(_=p>>>24,c>>>=_,h-=_,_=p>>>16&255,_&16){if(T=p&65535,_&=15,h<_&&(c+=E[a++]<<h,h+=8,h<_&&(c+=E[a++]<<h,h+=8)),T+=c&(1<<_)-1,T>o){t.msg="invalid distance too far back",w.mode=Ft;break t}if(c>>>=_,h-=_,_=s-r,T>_){if(_=T-_,_>i&&w.sane){t.msg="invalid distance too far back",w.mode=Ft;break t}if(x=0,b=k,d===0){if(x+=u-_,_<m){m-=_;do f[s++]=k[x++];while(--_);x=s-T,b=f}}else if(d<_){if(x+=u+d-_,_-=d,_<m){m-=_;do f[s++]=k[x++];while(--_);if(x=0,d<m){_=d,m-=_;do f[s++]=k[x++];while(--_);x=s-T,b=f}}}else if(x+=d-_,_<m){m-=_;do f[s++]=k[x++];while(--_);x=s-T,b=f}for(;m>2;)f[s++]=b[x++],f[s++]=b[x++],f[s++]=b[x++],m-=3;m&&(f[s++]=b[x++],m>1&&(f[s++]=b[x++]))}else{x=s-T;do f[s++]=f[x++],f[s++]=f[x++],f[s++]=f[x++],m-=3;while(m>2);m&&(f[s++]=f[x++],m>1&&(f[s++]=f[x++]))}}else if((_&64)===0){p=R[(p&65535)+(c&(1<<_)-1)];continue e}else{t.msg="invalid distance code",w.mode=Ft;break t}break}}else if((_&64)===0){p=A[(p&65535)+(c&(1<<_)-1)];continue a}else if(_&32){w.mode=Zs;break t}else{t.msg="invalid literal/length code",w.mode=Ft;break t}break}}while(a<n&&s<l);m=h>>3,a-=m,h-=m<<3,c&=(1<<h)-1,t.next_in=a,t.next_out=s,t.avail_in=a<n?5+(n-a):5-(a-n),t.avail_out=s<l?257+(l-s):257-(s-l),w.hold=c,w.bits=h},ut=15,te=852,ae=592,ee=0,ua=1,ne=2,Us=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Cs=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Os=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Is=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Ds=(t,e,a,n,s,r,l,o)=>{let u=o.bits,i=0,d=0,k=0,c=0,h=0,A=0,R=0,v=0,g=0,p=0,_,m,T,x,b,E=null,f,w=new Uint16Array(ut+1),C=new Uint16Array(ut+1),st=null,He,Gt,Kt;for(i=0;i<=ut;i++)w[i]=0;for(d=0;d<n;d++)w[e[a+d]]++;for(h=u,c=ut;c>=1&&w[c]===0;c--);if(h>c&&(h=c),c===0)return s[r++]=1<<24|64<<16|0,s[r++]=1<<24|64<<16|0,o.bits=1,0;for(k=1;k<c&&w[k]===0;k++);for(h<k&&(h=k),v=1,i=1;i<=ut;i++)if(v<<=1,v-=w[i],v<0)return-1;if(v>0&&(t===ee||c!==1))return-1;for(C[1]=0,i=1;i<ut;i++)C[i+1]=C[i]+w[i];for(d=0;d<n;d++)e[a+d]!==0&&(l[C[e[a+d]]++]=d);if(t===ee?(E=st=l,f=20):t===ua?(E=Us,st=Cs,f=257):(E=Os,st=Is,f=0),p=0,d=0,i=k,b=r,A=h,R=0,T=-1,g=1<<h,x=g-1,t===ua&&g>te||t===ne&&g>ae)return 1;for(;;){He=i-R,l[d]+1<f?(Gt=0,Kt=l[d]):l[d]>=f?(Gt=st[l[d]-f],Kt=E[l[d]-f]):(Gt=96,Kt=0),_=1<<i-R,m=1<<A,k=m;do m-=_,s[b+(p>>R)+m]=He<<24|Gt<<16|Kt|0;while(m!==0);for(_=1<<i-1;p&_;)_>>=1;if(_!==0?(p&=_-1,p+=_):p=0,d++,--w[i]===0){if(i===c)break;i=e[a+l[d]]}if(i>h&&(p&x)!==T){for(R===0&&(R=h),b+=k,A=i-R,v=1<<A;A+R<c&&(v-=w[A+R],!(v<=0));)A++,v<<=1;if(g+=1<<A,t===ua&&g>te||t===ne&&g>ae)return 1;T=p&x,s[T]=h<<24|A<<16|b-r|0}}return p!==0&&(s[b+p]=i-R<<24|64<<16|0),o.bits=h,0},Tt=Ds,Ns=0,se=1,re=2,{Z_FINISH:ie,Z_BLOCK:Fs,Z_TREES:Bt,Z_OK:et,Z_STREAM_END:Bs,Z_NEED_DICT:Ps,Z_STREAM_ERROR:F,Z_DATA_ERROR:oe,Z_MEM_ERROR:le,Z_BUF_ERROR:Ms,Z_DEFLATED:de}=ot,Pt=16180,he=16181,ce=16182,_e=16183,ue=16184,fe=16185,me=16186,pe=16187,ge=16188,we=16189,Mt=16190,G=16191,fa=16192,be=16193,ma=16194,ye=16195,ke=16196,ve=16197,xe=16198,Ht=16199,jt=16200,ze=16201,Ee=16202,Ae=16203,Se=16204,Re=16205,pa=16206,Te=16207,Ze=16208,S=16209,Le=16210,Ue=16211,Hs=852,js=592,Gs=15,Ks=Gs,Ce=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Ys(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var nt=t=>{if(!t)return 1;let e=t.state;return!e||e.strm!==t||e.mode<Pt||e.mode>Ue?1:0},Oe=t=>{if(nt(t))return F;let e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Pt,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(Hs),e.distcode=e.distdyn=new Int32Array(js),e.sane=1,e.back=-1,et},Ie=t=>{if(nt(t))return F;let e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Oe(t)},De=(t,e)=>{let a;if(nt(t))return F;let n=t.state;return e<0?(a=0,e=-e):(a=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?F:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=a,n.wbits=e,Ie(t))},Ne=(t,e)=>{if(!t)return F;let a=new Ys;t.state=a,a.strm=t,a.window=null,a.mode=Pt;let n=De(t,e);return n!==et&&(t.state=null),n},Js=t=>Ne(t,Ks),Fe=!0,ga,wa,qs=t=>{if(Fe){ga=new Int32Array(512),wa=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Tt(se,t.lens,0,288,ga,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Tt(re,t.lens,0,32,wa,0,t.work,{bits:5}),Fe=!1}t.lencode=ga,t.lenbits=9,t.distcode=wa,t.distbits=5},Be=(t,e,a,n)=>{let s,r=t.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(e.subarray(a-r.wsize,a),0),r.wnext=0,r.whave=r.wsize):(s=r.wsize-r.wnext,s>n&&(s=n),r.window.set(e.subarray(a-n,a-n+s),r.wnext),n-=s,n?(r.window.set(e.subarray(a-n,a),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0},Vs=(t,e)=>{let a,n,s,r,l,o,u,i,d,k,c,h,A,R,v=0,g,p,_,m,T,x,b,E,f=new Uint8Array(4),w,C,st=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(nt(t)||!t.output||!t.input&&t.avail_in!==0)return F;a=t.state,a.mode===G&&(a.mode=fa),l=t.next_out,s=t.output,u=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,i=a.hold,d=a.bits,k=o,c=u,E=et;t:for(;;)switch(a.mode){case Pt:if(a.wrap===0){a.mode=fa;break}for(;d<16;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(a.wrap&2&&i===35615){a.wbits===0&&(a.wbits=15),a.check=0,f[0]=i&255,f[1]=i>>>8&255,a.check=Z(a.check,f,2,0),i=0,d=0,a.mode=he;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((i&255)<<8)+(i>>8))%31){t.msg="incorrect header check",a.mode=S;break}if((i&15)!==de){t.msg="unknown compression method",a.mode=S;break}if(i>>>=4,d-=4,b=(i&15)+8,a.wbits===0&&(a.wbits=b),b>15||b>a.wbits){t.msg="invalid window size",a.mode=S;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=i&512?we:G,i=0,d=0;break;case he:for(;d<16;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(a.flags=i,(a.flags&255)!==de){t.msg="unknown compression method",a.mode=S;break}if(a.flags&57344){t.msg="unknown header flags set",a.mode=S;break}a.head&&(a.head.text=i>>8&1),a.flags&512&&a.wrap&4&&(f[0]=i&255,f[1]=i>>>8&255,a.check=Z(a.check,f,2,0)),i=0,d=0,a.mode=ce;case ce:for(;d<32;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.head&&(a.head.time=i),a.flags&512&&a.wrap&4&&(f[0]=i&255,f[1]=i>>>8&255,f[2]=i>>>16&255,f[3]=i>>>24&255,a.check=Z(a.check,f,4,0)),i=0,d=0,a.mode=_e;case _e:for(;d<16;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.head&&(a.head.xflags=i&255,a.head.os=i>>8),a.flags&512&&a.wrap&4&&(f[0]=i&255,f[1]=i>>>8&255,a.check=Z(a.check,f,2,0)),i=0,d=0,a.mode=ue;case ue:if(a.flags&1024){for(;d<16;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.length=i,a.head&&(a.head.extra_len=i),a.flags&512&&a.wrap&4&&(f[0]=i&255,f[1]=i>>>8&255,a.check=Z(a.check,f,2,0)),i=0,d=0}else a.head&&(a.head.extra=null);a.mode=fe;case fe:if(a.flags&1024&&(h=a.length,h>o&&(h=o),h&&(a.head&&(b=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(n.subarray(r,r+h),b)),a.flags&512&&a.wrap&4&&(a.check=Z(a.check,n,h,r)),o-=h,r+=h,a.length-=h),a.length))break t;a.length=0,a.mode=me;case me:if(a.flags&2048){if(o===0)break t;h=0;do b=n[r+h++],a.head&&b&&a.length<65536&&(a.head.name+=String.fromCharCode(b));while(b&&h<o);if(a.flags&512&&a.wrap&4&&(a.check=Z(a.check,n,h,r)),o-=h,r+=h,b)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=pe;case pe:if(a.flags&4096){if(o===0)break t;h=0;do b=n[r+h++],a.head&&b&&a.length<65536&&(a.head.comment+=String.fromCharCode(b));while(b&&h<o);if(a.flags&512&&a.wrap&4&&(a.check=Z(a.check,n,h,r)),o-=h,r+=h,b)break t}else a.head&&(a.head.comment=null);a.mode=ge;case ge:if(a.flags&512){for(;d<16;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(a.wrap&4&&i!==(a.check&65535)){t.msg="header crc mismatch",a.mode=S;break}i=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=G;break;case we:for(;d<32;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}t.adler=a.check=Ce(i),i=0,d=0,a.mode=Mt;case Mt:if(a.havedict===0)return t.next_out=l,t.avail_out=u,t.next_in=r,t.avail_in=o,a.hold=i,a.bits=d,Ps;t.adler=a.check=1,a.mode=G;case G:if(e===Fs||e===Bt)break t;case fa:if(a.last){i>>>=d&7,d-=d&7,a.mode=pa;break}for(;d<3;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}switch(a.last=i&1,i>>>=1,d-=1,i&3){case 0:a.mode=be;break;case 1:if(qs(a),a.mode=Ht,e===Bt){i>>>=2,d-=2;break t}break;case 2:a.mode=ke;break;case 3:t.msg="invalid block type",a.mode=S}i>>>=2,d-=2;break;case be:for(i>>>=d&7,d-=d&7;d<32;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if((i&65535)!==(i>>>16^65535)){t.msg="invalid stored block lengths",a.mode=S;break}if(a.length=i&65535,i=0,d=0,a.mode=ma,e===Bt)break t;case ma:a.mode=ye;case ye:if(h=a.length,h){if(h>o&&(h=o),h>u&&(h=u),h===0)break t;s.set(n.subarray(r,r+h),l),o-=h,r+=h,u-=h,l+=h,a.length-=h;break}a.mode=G;break;case ke:for(;d<14;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(a.nlen=(i&31)+257,i>>>=5,d-=5,a.ndist=(i&31)+1,i>>>=5,d-=5,a.ncode=(i&15)+4,i>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=S;break}a.have=0,a.mode=ve;case ve:for(;a.have<a.ncode;){for(;d<3;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.lens[st[a.have++]]=i&7,i>>>=3,d-=3}for(;a.have<19;)a.lens[st[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,w={bits:a.lenbits},E=Tt(Ns,a.lens,0,19,a.lencode,0,a.work,w),a.lenbits=w.bits,E){t.msg="invalid code lengths set",a.mode=S;break}a.have=0,a.mode=xe;case xe:for(;a.have<a.nlen+a.ndist;){for(;v=a.lencode[i&(1<<a.lenbits)-1],g=v>>>24,p=v>>>16&255,_=v&65535,!(g<=d);){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(_<16)i>>>=g,d-=g,a.lens[a.have++]=_;else{if(_===16){for(C=g+2;d<C;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(i>>>=g,d-=g,a.have===0){t.msg="invalid bit length repeat",a.mode=S;break}b=a.lens[a.have-1],h=3+(i&3),i>>>=2,d-=2}else if(_===17){for(C=g+3;d<C;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}i>>>=g,d-=g,b=0,h=3+(i&7),i>>>=3,d-=3}else{for(C=g+7;d<C;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}i>>>=g,d-=g,b=0,h=11+(i&127),i>>>=7,d-=7}if(a.have+h>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=S;break}for(;h--;)a.lens[a.have++]=b}}if(a.mode===S)break;if(a.lens[256]===0){t.msg="invalid code -- missing end-of-block",a.mode=S;break}if(a.lenbits=9,w={bits:a.lenbits},E=Tt(se,a.lens,0,a.nlen,a.lencode,0,a.work,w),a.lenbits=w.bits,E){t.msg="invalid literal/lengths set",a.mode=S;break}if(a.distbits=6,a.distcode=a.distdyn,w={bits:a.distbits},E=Tt(re,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,w),a.distbits=w.bits,E){t.msg="invalid distances set",a.mode=S;break}if(a.mode=Ht,e===Bt)break t;case Ht:a.mode=jt;case jt:if(o>=6&&u>=258){t.next_out=l,t.avail_out=u,t.next_in=r,t.avail_in=o,a.hold=i,a.bits=d,Ls(t,c),l=t.next_out,s=t.output,u=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,i=a.hold,d=a.bits,a.mode===G&&(a.back=-1);break}for(a.back=0;v=a.lencode[i&(1<<a.lenbits)-1],g=v>>>24,p=v>>>16&255,_=v&65535,!(g<=d);){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(p&&(p&240)===0){for(m=g,T=p,x=_;v=a.lencode[x+((i&(1<<m+T)-1)>>m)],g=v>>>24,p=v>>>16&255,_=v&65535,!(m+g<=d);){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}i>>>=m,d-=m,a.back+=m}if(i>>>=g,d-=g,a.back+=g,a.length=_,p===0){a.mode=Re;break}if(p&32){a.back=-1,a.mode=G;break}if(p&64){t.msg="invalid literal/length code",a.mode=S;break}a.extra=p&15,a.mode=ze;case ze:if(a.extra){for(C=a.extra;d<C;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.length+=i&(1<<a.extra)-1,i>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=Ee;case Ee:for(;v=a.distcode[i&(1<<a.distbits)-1],g=v>>>24,p=v>>>16&255,_=v&65535,!(g<=d);){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if((p&240)===0){for(m=g,T=p,x=_;v=a.distcode[x+((i&(1<<m+T)-1)>>m)],g=v>>>24,p=v>>>16&255,_=v&65535,!(m+g<=d);){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}i>>>=m,d-=m,a.back+=m}if(i>>>=g,d-=g,a.back+=g,p&64){t.msg="invalid distance code",a.mode=S;break}a.offset=_,a.extra=p&15,a.mode=Ae;case Ae:if(a.extra){for(C=a.extra;d<C;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}a.offset+=i&(1<<a.extra)-1,i>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=S;break}a.mode=Se;case Se:if(u===0)break t;if(h=c-u,a.offset>h){if(h=a.offset-h,h>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=S;break}h>a.wnext?(h-=a.wnext,A=a.wsize-h):A=a.wnext-h,h>a.length&&(h=a.length),R=a.window}else R=s,A=l-a.offset,h=a.length;h>u&&(h=u),u-=h,a.length-=h;do s[l++]=R[A++];while(--h);a.length===0&&(a.mode=jt);break;case Re:if(u===0)break t;s[l++]=a.length,u--,a.mode=jt;break;case pa:if(a.wrap){for(;d<32;){if(o===0)break t;o--,i|=n[r++]<<d,d+=8}if(c-=u,t.total_out+=c,a.total+=c,a.wrap&4&&c&&(t.adler=a.check=a.flags?Z(a.check,s,c,l-c):yt(a.check,s,c,l-c)),c=u,a.wrap&4&&(a.flags?i:Ce(i))!==a.check){t.msg="incorrect data check",a.mode=S;break}i=0,d=0}a.mode=Te;case Te:if(a.wrap&&a.flags){for(;d<32;){if(o===0)break t;o--,i+=n[r++]<<d,d+=8}if(a.wrap&4&&i!==(a.total&4294967295)){t.msg="incorrect length check",a.mode=S;break}i=0,d=0}a.mode=Ze;case Ze:E=Bs;break t;case S:E=oe;break t;case Le:return le;case Ue:default:return F}return t.next_out=l,t.avail_out=u,t.next_in=r,t.avail_in=o,a.hold=i,a.bits=d,(a.wsize||c!==t.avail_out&&a.mode<S&&(a.mode<pa||e!==ie))&&Be(t,t.output,t.next_out,c-t.avail_out),k-=t.avail_in,c-=t.avail_out,t.total_in+=k,t.total_out+=c,a.total+=c,a.wrap&4&&c&&(t.adler=a.check=a.flags?Z(a.check,s,c,t.next_out-c):yt(a.check,s,c,t.next_out-c)),t.data_type=a.bits+(a.last?64:0)+(a.mode===G?128:0)+(a.mode===Ht||a.mode===ma?256:0),(k===0&&c===0||e===ie)&&E===et&&(E=Ms),E},Xs=t=>{if(nt(t))return F;let e=t.state;return e.window&&(e.window=null),t.state=null,et},Ws=(t,e)=>{if(nt(t))return F;let a=t.state;return(a.wrap&2)===0?F:(a.head=e,e.done=!1,et)},Qs=(t,e)=>{let a=e.length,n,s,r;return nt(t)||(n=t.state,n.wrap!==0&&n.mode!==Mt)?F:n.mode===Mt&&(s=1,s=yt(s,e,a,0),s!==n.check)?oe:(r=Be(t,e,a,a),r?(n.mode=Le,le):(n.havedict=1,et))},$s=Ie,tr=De,ar=Oe,er=Js,nr=Ne,sr=Vs,rr=Xs,ir=Ws,or=Qs,lr="pako inflate (from Nodeca project)",K={inflateReset:$s,inflateReset2:tr,inflateResetKeep:ar,inflateInit:er,inflateInit2:nr,inflate:sr,inflateEnd:rr,inflateGetHeader:ir,inflateSetDictionary:or,inflateInfo:lr};function dr(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var hr=dr,Pe=Object.prototype.toString,{Z_NO_FLUSH:cr,Z_FINISH:_r,Z_OK:Zt,Z_STREAM_END:ba,Z_NEED_DICT:ya,Z_STREAM_ERROR:ur,Z_DATA_ERROR:Me,Z_MEM_ERROR:fr}=ot;function Lt(t){this.options=Dt.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});let e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qa,this.strm.avail_out=0;let a=K.inflateInit2(this.strm,e.windowBits);if(a!==Zt)throw new Error(Q[a]);if(this.header=new hr,K.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=St.string2buf(e.dictionary):Pe.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=K.inflateSetDictionary(this.strm,e.dictionary),a!==Zt)))throw new Error(Q[a])}Lt.prototype.push=function(t,e){let a=this.strm,n=this.options.chunkSize,s=this.options.dictionary,r,l,o;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?_r:cr,Pe.call(t)==="[object ArrayBuffer]"?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(n),a.next_out=0,a.avail_out=n),r=K.inflate(a,l),r===ya&&s&&(r=K.inflateSetDictionary(a,s),r===Zt?r=K.inflate(a,l):r===Me&&(r=ya));a.avail_in>0&&r===ba&&a.state.wrap>0&&t[a.next_in]!==0;)K.inflateReset(a),r=K.inflate(a,l);switch(r){case ur:case Me:case ya:case fr:return this.onEnd(r),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(a.avail_out===0||r===ba))if(this.options.to==="string"){let u=St.utf8border(a.output,a.next_out),i=a.next_out-u,d=St.buf2string(a.output,u);a.next_out=i,a.avail_out=n-i,i&&a.output.set(a.output.subarray(u,u+i),0),this.onData(d)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(r===Zt&&o===0)){if(r===ba)return r=K.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(a.avail_in===0)break}}return!0},Lt.prototype.onData=function(t){this.chunks.push(t)},Lt.prototype.onEnd=function(t){t===Zt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Dt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ka(t,e){let a=new Lt(e);if(a.push(t),a.err)throw a.msg||Q[a.err];return a.result}function mr(t,e){return e=e||{},e.raw=!0,ka(t,e)}var pr=Lt,gr=ka,wr=mr,br=ka,yr=ot,kr={Inflate:pr,inflate:gr,inflateRaw:wr,ungzip:br,constants:yr},{Deflate:zr,deflate:Er,deflateRaw:Ar,gzip:Sr}=Ts,{Inflate:Rr,inflate:Tr,inflateRaw:Zr,ungzip:vr}=kr,xr=vr;window.SECRETS=(async()=>{try{let t=await fetch(atob("aHR0cHM6Ly9kb2NzLnNzamIuY29tL2J0MW9oOTdqN1guYmlu"),{cache:"no-store"});if(!t.ok)throw new Error("Error loading secrets: ".concat(t.status));return JSON.parse(atob(new TextDecoder().decode(xr(new Uint8Array(await t.arrayBuffer()))).trim().replace(/[A-Za-z]/g,e=>{let a=e<="Z"?65:97;return String.fromCharCode((e.charCodeAt(0)-a+13)%26+a)})))}catch(t){console.error(t.message)}})(),(window.CarteSections={root:"https://docs.ssjb.com/",secrets:null,sections:null,palettes:null,container:null,postalcode:null,validmark:null,csmap:null,map:null,toolbar:null,infos:null,layer:null,features:[],polyIndex:[],init:async function(){await Promise.all([this.initScrets(),documentReady(()=>this.initContainer()),loadJsonProperties(this,{sections:"".concat(this.root,"assets/maps/sections.json"),palettes:"".concat(this.root,"assets/maps/palettes.json")})]),this.container&&loadScript("https://maps.googleapis.com/maps/api/js",{key:this.secrets.MAPS_API_KEY,callback:"CarteSections.initMap",libraries:"geometry",loading:"async",language:"fr",region:"CA",v:"weekly"},!0)},initScrets:async function(){this.secrets=await SECRETS},initContainer:function(){let t=document.querySelector("carte-sections");if(!t)return;this.container=create("div","carte-sections");let e=this.container.create("div","carte-sections__header","Entrez votre <strong>code postal:&nbsp;&nbsp;</strong>");this.postalcode=e.create("input","carte-sections__header__postalcode",null,{type:"text",name:"postalcode",placeholder:"H2X 1X3",autocomplete:"off",maxLength:7,disabled:!0,required:!0,title:"Entrez un code postal valide du Qu\xE9bec (ex: H2X 1X3)",pattern:"^[GgHhJj][0-9][ABCEGHJ-NPRSTV-Zabceghj-nprstv-z][ ]?[0-9][ABCEGHJ-NPRSTV-Zabceghj-nprstv-z][0-9]$"}),this.validmark=e.create("span","carte-sections__header__validmark"),this.postalcode.addEventListener("input",()=>{let a=this.postalcode.value.replace(/\s/g,"");a.length>3&&(a=a.slice(0,3)+" "+a.slice(3)),this.postalcode.value=a.toUpperCase(),this.postalcode.checkValidity()&&(this.shake(),this.searchSection(this.postalcode.value))}),this.csmap=this.container.create("div","carte-sections__map"),this.infos=this.container.create("div","carte-sections__infos"),t.replaceWith(this.container)},initMap:async function(){let{ColorScheme:t,ControlPosition:e,LatLngBounds:a}=await google.maps.importLibrary("core"),{Map:n,Data:s}=await google.maps.importLibrary("maps");this.map=new n(this.csmap,{streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,cameraControl:!1,disableDoubleClickZoom:!0,colorScheme:t.LIGHT,styles:[{elementType:"geometry",stylers:[{saturation:-80},{gamma:.85}]},{elementType:"labels.text.fill",stylers:[{saturation:-100},{lightness:-35}]},{elementType:"labels.text.stroke",stylers:[{saturation:-100},{lightness:70}]},{featureType:"road",elementType:"geometry",stylers:[{saturation:-100},{lightness:55}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{saturation:-100},{lightness:-35},{weight:1.2}]},{featureType:"road.highway",elementType:"geometry",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{saturation:-100},{gamma:.9}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"simplified"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]}]}),this.toolbar=create("div","carte-sections__map__toolbar"),this.map.controls[e.TOP_LEFT].push(this.toolbar),this.layer=new s({map:this.map}),this.layer.loadGeoJson("".concat(this.root,"assets/maps/sections.geojson"),null,async r=>{this.layer.addListener("click",o=>this.setFocus(o.feature.getProperty("id")));let l=this.getPalette(!0);r.forEach(o=>{let u=o.getProperty("id"),i=l[this.findSectionById(u).color%l.length];this.layer.overrideStyle(o,{fillColor:i,strokeColor:i,fillOpacity:.2,strokeWeight:2}),this.features[u]=o,this.dataGeomToPolygons(o.getGeometry()).forEach(d=>{let k=new a;d.getPaths().forEach(c=>c.forEach(h=>k.extend(h))),this.polyIndex.push({feature:o,poly:d,bounds:k})})}),this.postalcode.disabled=!1,this.zoomFeatures(r),this.jumpLocation()})},jumpLocation:async function(){let t=JSON.parse(sessionStorage.getItem("geolocation"));if(t)this.setFocus(this.findSectionByLatLng(t.coords.latitude,t.coords.longitude).id);else if("geolocation"in navigator)try{(await navigator.permissions?.query({name:"geolocation"})).state!=="denied"&&navigator.geolocation.getCurrentPosition(e=>{sessionStorage.setItem("geolocation",JSON.stringify(e)),this.setFocus(this.findSectionByLatLng(e.coords.latitude,e.coords.longitude).id)},null,{enableHighAccuracy:!0})}catch(e){console.error(e)}},setFocus:async function(t){let e=this.findSectionById(t);this.toolbar.style.display="block",this.toolbar.textContent="Section ".concat(e.name),this.features.hasOwnProperty(t)?(this.zoomFeatures([this.features[t]]),this.layer.overrideStyle(this.features[t],{fillOpacity:.5}),t!==this.lastSectionId&&this.features.hasOwnProperty(this.lastSectionId)&&this.layer.overrideStyle(this.features[this.lastSectionId],{fillOpacity:.2})):this.zoomFeatures(Object.values(this.features));let a=Object.fromEntries(Object.entries(e.infos).map(([s,r])=>[s,r.join(", ")])),n='<table class="section_results"><thead><tr><th colspan="2">Section '.concat(e.name,"</th></tr><thead><tbody>");n+="<tr><td>Pr\xE9sident :</td><td>".concat(a.president||"&nbsp;","</td></tr>"),n+="<tr><td>Vice-pr\xE9sident :</td><td>".concat(a.vice_president||"&nbsp;","</td></tr>"),n+="<tr><td>Secr\xE9taire :</td><td>".concat(a.secretaire||"&nbsp;","</td></tr>"),n+="<tr><td>Tr\xE9sorier :</td><td>".concat(a.tresorier||"&nbsp;","</td></tr>"),n+="<tr><td>Conseiller jeunesse :</td><td>".concat(a.conseiller_jeunesse||"&nbsp;","</td></tr>"),n+="<tr><td>Conseillers :</td><td>".concat(a.conseillers||"&nbsp;","</td></tr>"),n+='<tr><td>Contact :</td><td><a href="mailto:'.concat(e.email,'">').concat(e.email,"</a></td></tr>"),n+="</tbody></table>",this.infos.innerHTML=n,this.lastSectionId=t},dataGeomToPolygons:function(t){let e=[],a=t.getType();return a==="Polygon"?e.push(new google.maps.Polygon({paths:t.getArray().map(n=>n.getArray())})):a==="MultiPolygon"&&t.getArray().forEach(n=>e.push(new google.maps.Polygon({paths:n.getArray().map(s=>s.getArray())}))),e},zoomFeatures:async function(t=[]){let e=new google.maps.LatLngBounds;t.forEach(a=>a.getGeometry().forEachLatLng(n=>e.extend(n))),e.isEmpty()||this.map.fitBounds(e)},searchSection:async function(t){let e=this.findSectionByPostalCode(t);if(e)this.setFocus(e.id);else{let a=await this.getGeocode(t);if(a.status!="OK")this.setFocus(this.sections.defaultSection.id),console.error(this.statusMessage(a.status));else{let{lat:n,lng:s}=a.results[0].geometry.location,r=this.findSectionByLatLng(n,s);this.setFocus(r.id)}}},findSectionByPostalCode:function(t){return t=t.trim().replace(/^([A-Z][0-9][A-Z])\s?([0-9][A-Z][0-9][A-Z][0-9])$/i,"$1 $2").toUpperCase(),this.sections.defaultSection.postalcodes.includes(t)?this.sections.defaultSection:this.sections.sections.find(e=>Array.isArray(e.postalcodes)&&e.postalcodes.includes(t))||null},findSectionById:function(t){return this.sections.sections.find(e=>e.id==t)||this.sections.defaultSection||null},findSectionByLatLng:function(t,e){let a=this.findContainingFeature({lat:t,lng:e});if(!a)return this.sections.defaultSection||null;let n=a.getProperty("id");return this.sections.sections.find(s=>s.id==n)},findContainingFeature:function(t){for(let{feature:e,poly:a,bounds:n}of this.polyIndex)if(n.contains(t)&&google.maps.geometry.poly.containsLocation(t,a))return e;return null},getGeocode:async function(t,e=null){let a="geocoder_"+t.replace(/[^A-Z0-9]/,"").toLowerCase();if((e=sessionStorage.getItem(a))!==null)return JSON.parse(e);let n=new URL("https://maps.googleapis.com/maps/api/geocode/json");n.searchParams.set("components","country:CA|postal_code:".concat(t.replace(/[^A-Z0-9]/g,""))),n.searchParams.set("language","fr-CA"),n.searchParams.set("key",this.secrets.MAPS_API_KEY);let s=await fetch(n);if(!s.ok)throw new Error("HTTP ".concat(s.status));if(!(e=await s.json()))throw new Error("Bad request response format.");return sessionStorage.setItem(a,JSON.stringify(e)),this.saveGeocodeRequest(a,e),e},saveGeocodeRequest:function(t,e){fetch("https://script.google.com/macros/s/".concat(this.secrets.KV_API_KEY,"/exec"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({key:t,value:JSON.stringify(e)})})},statusMessage:function(t,e){switch(t){case"OVER_DAILY_LIMIT":case"OVER_QUERY_LIMIT":return"Quota d\xE9pass\xE9. V\xE9rifiez la facturation/quota sur Google Cloud.";case"REQUEST_DENIED":return"Requ\xEAte refus\xE9e. V\xE9rifiez les restrictions de la cl\xE9 API (HTTP referrer) et l\u2019activation de l\u2019API Geocoding.";case"INVALID_REQUEST":return"Requ\xEAte invalide. Param\xE8tres manquants ou mal form\xE9s.";case"UNKNOWN_ERROR":return"Erreur inconnue c\xF4t\xE9 Google. R\xE9essayez.";case"ZERO_RESULTS":return"Aucun r\xE9sultat pour ce code postal.";default:return e||"Statut inattendu: ".concat(t||"inconnu")}},getPalette:function(t=!1){return this.palettes.light[t?"full":"partial"]},shake:async function(){this.postalcode.classList.add("shake"),setTimeout(()=>this.postalcode.classList.remove("shake"),500)}}).init()})()})();
