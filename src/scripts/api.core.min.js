(()=>{self.create=(t,n=null,s=null,a={})=>{let e=document.createElement(t);return n&&(e.className=n),s&&(e.innerHTML=s),Object.entries(a).forEach(o=>e.setAttribute(o[0],o[1])),e};HTMLElement.prototype.create=function(t,n=null,s=null,a={}){let e=create(t,n,s,a);return this.append(e),e};self.loadJsonProperties=async function(t,n={}){let s=Object.entries(n),a=await Promise.allSettled(s.map(async([e,o])=>{let c=await fetch(o),r=null;try{r=await c.json()}catch{}return{key:e,url:o,status:c.status,ok:c.ok,data:r}}));for(let e of a)if(e.status==="fulfilled"){let{key:o,url:c,status:r,ok:i,data:l}=e.value;if(!i){console.error("".concat(o," [").concat(r," - ERREUR] ").concat(c));continue}t[o]=l}else console.error("Erreur r\xE9seau/JS pendant le chargement :",e.reason);return t};self.documentReady=function(t=null){return new Promise(n=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{t&&t(),n()},{once:!0}):(t&&t(),n())})};self.loadScript=async function(t,n={},s=!1){let a=new URL(t);Object.entries(n).forEach(([o,c])=>a.searchParams.set(o,c));let e=document.createElement("script");e.src=a.toString(),e.async=s,document.head.appendChild(e)};window.CarteSections={root:"https://docs.ssjb.com/",secrets:null,sections:null,palettes:null,container:null,postalcode:null,init:async function(){await Promise.all([documentReady(()=>this.initContainer())]),this.container&&console.log(this.container)},initContainer:function(){let t=document.querySelector("carte-sections");if(!t)return;this.container=create("div","carte-sections");let n=this.container.create("div","carte-sections__header","Entrez votre <strong>code postal:&nbsp;&nbsp;</strong>");this.postalcode=n.create("input","carte-sections__header__postalcode",null,{type:"text",name:"postalcode",placeholder:"H2X 1X3",autocomplete:"off",maxLength:7,required:!0,title:"Entrez un code postal valide du Qu\xE9bec (ex: H2X 1X3)",pattern:"^[GgHhJj][0-9][ABCEGHJ-NPRSTV-Zabceghj-nprstv-z][ ]?[0-9][ABCEGHJ-NPRSTV-Zabceghj-nprstv-z][0-9]$"}),n.create("span","carte-sections__header__validmark"),this.postalcode.addEventListener("input",()=>{let s=this.postalcode.value.replace(/\s/g,"");s.length>3&&(s=s.slice(0,3)+" "+s.slice(3)),this.postalcode.value=s.toUpperCase(),this.postalcode.checkValidity()&&(console.log("valid"),this.shake())}),t.replaceWith(this.container)},shake:async function(){this.postalcode.classList.add("shake"),setTimeout(()=>this.postalcode.classList.remove("shake"),500)}};CarteSections.init();})();
